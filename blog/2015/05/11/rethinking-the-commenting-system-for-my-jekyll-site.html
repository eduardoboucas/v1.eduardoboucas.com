<!DOCTYPE html>
<html>
<head>
    



<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>Eduardo Boucas - Web Developer from London</title>
<meta name="description" content="A passionate and creative full-stack web developer that thinks code and numbers, but breathes art and design. Responsible and responsive. Terrible dancer.">
<link rel="alternate" type="application/rss+xml" title="Eduardo saying things" href="http://feeds.eduardoboucas.com/eduardoboucas" />
<link href="/sitemap.xml" rel="sitemap" title="Sitemap" type="application/xml">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<link rel="shortcut icon" href="/assets/images/favicon.ico" type="image/x-icon" />

<!-- Open graph -->
<meta content="Eduardo Boucas - Web Developer from London" property="og:site_name">
<meta content="Eduardo Boucas - Web Developer from London" property="og:title">
<meta content="https://eduardoboucas.com/assets/images/bust.png" property="og:image">
<meta content="website" property="og:type">
<meta content="A passionate and creative full-stack web developer that thinks code and numbers, but breathes art and design. Responsible and responsive. Terrible dancer." property="og:description">
<meta content="https://eduardoboucas.com" property="og:url">

<!-- Facebook stuff -->


<!-- Twitter Card -->
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@eduardoboucas" />
<meta name="twitter:image" content="https://eduardoboucas.com/assets/images/bust.png" />
<meta name="twitter:title" content="Eduardo Boucas - Web Developer from London" />
<meta name="twitter:description" content="A passionate and creative full-stack web developer that thinks code and numbers, but breathes art and design. Responsible and responsive. Terrible dancer." />
<meta name="twitter:url" content="https://eduardoboucas.com" />
    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="https://eduardoboucas.com/blog">

    

    

    <script src="/js/vendor/jquery.min.js"></script>
<script src="/js/blog.js"></script>
<script src="/js/vendor/spinner.min.js"></script>
<script src="/js/vendor/jekyll-search.js"></script>
</head>

<body class="body--blog">
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
	<symbol id="icn--arrow" viewBox="0 0 45 60">
		<title>Arrow</title>
		<path d="M43.8,28H16c0.1-0.4,0.2-0.7,0.3-1.2c0.6-2,1.3-4.5,2.8-7.6c0,0,0,0,0,0c0,0,0,0,0,0c0.1-0.2,0-0.5-0.2-0.7
		c-0.2-0.1-0.5,0-0.7,0.2c-4,7.9-17.5,10.7-17.7,10.7c-0.2,0-0.4,0.3-0.4,0.5s0.2,0.4,0.4,0.5c0.1,0,13.6,2.9,17.6,10.7c0,0,0,0,0,0
		c0,0,0,0,0,0l0,0c0,0,0.1,0.1,0.1,0.1c0.1,0.1,0.2,0.2,0.4,0.2c0.3,0,0.5-0.2,0.5-0.5c0-0.1,0-0.2-0.1-0.3c-1.7-3.3-2.5-6-3-7.9
		C16,32.5,16,32.2,15.9,32h27.8c0.5,0,1-0.5,1-1v-2C44.8,28.5,44.3,28,43.8,28z"/>
	</symbol>

	<symbol id="icn--chair" viewBox="0 0 45 60">
		<title>Chair</title>
		<path d="M40.8,0.3C40.6,0.1,40.4,0,40.1,0c-0.6,0-1.7,0.3-2.4,0.7c-0.7,0.4-1.6,0.6-1.9,0.7c-0.4,0-2.1-0.3-4-0.7
		c-1-0.2-2.3-0.3-3.8-0.3c-1.3,0-2.5,0.1-3.5,0.3l-0.2,0c-2.2,0.4-4.2,0.7-4.7,0.7c-0.5,0-1.2-0.2-1.5-0.5c-0.5-0.4-1.5-0.7-2.1-0.7
		c-0.3,0-0.6,0.1-0.8,0.4c-0.4,0.5-0.5,1.3-0.2,2.2c0.2,0.8,1.1,1.6,2.3,2c0,0,0,0.1,0,0.1c0,0.6,0.1,1.6,0.2,2.7
		c0.2,2.2,0.5,5.2,0.9,8.1c0.4,2.9,0.9,5.8,1.4,8c0.2,0.8,0.3,1.5,0.4,2.1l-1.8-0.1L8.2,26.2c-0.5,0-0.9,0.4-0.9,0.9
		c0,0.5,0.4,0.9,0.9,0.9l2.4,0.1c-0.2,0.8-0.6,1.9-0.9,3.2C8.9,34.2,7.9,38,7,41.9c-0.9,3.8-1.7,7.7-2.3,10.6
		c-0.3,1.4-0.5,2.7-0.6,3.5c-0.1,0.9-0.2,1.3-0.2,1.3c0,0.2,0.1,0.4,0.3,0.5c0.2,0.1,0.5-0.1,0.5-0.3c0,0,0.1-0.5,0.4-1.3
		c0.2-0.8,0.6-2,1-3.4c0.3-1.2,0.7-2.6,1.1-4.1c0.2,0,0.3,0,0.5,0c0.9-0.1,2.1-0.2,3.3-0.3c0.4-0.1,0.8-0.1,1.2-0.2
		c0.4,0.1,1,0.1,1.7,0.2c0.3,0,0.6,0.1,0.9,0.1c0,0.4,0,0.8,0,1.1c0,1.3-0.1,2.3-0.1,3.1c0,0.7,0,1.2,0,1.2c0,0.2,0.1,0.4,0.4,0.4
		c0.2,0,0.4-0.1,0.5-0.3c0,0,0.1-0.4,0.2-1.2c0.1-0.7,0.3-1.8,0.5-3c0-0.3,0.1-0.7,0.1-1.1c1.1,0.1,2.2,0.2,3.4,0.3
		c1.1,0.1,2.1,0.1,3.1,0.2c0,0,0,0,0,0c0,0,0,0.1,0,0.1c0.1,1.9,0.3,3.8,0.4,5.3c0.1,1.6,0.2,2.8,0.3,3.8c0.1,0.9,0.1,1.4,0.1,1.4
		c0,0.2,0.2,0.4,0.4,0.4c0.2,0,0.4-0.2,0.4-0.4c0,0,0-0.5,0-1.4c0-0.9,0.1-2.2,0.1-3.8c0-1.3,0-2.7,0-4.3c0.1,0,0.2,0,0.3-0.1
		c0.8-0.1,1.9-0.3,3-0.6c1.1-0.3,2.2-0.6,3-0.8c0.2-0.1,0.3-0.1,0.5-0.2c0.2,1.1,0.5,2.1,0.7,3c0.3,1.4,0.6,2.5,0.8,3.3
		c0.2,0.8,0.3,1.2,0.3,1.2c0.1,0.2,0.2,0.3,0.5,0.3c0.2,0,0.4-0.2,0.4-0.5c0,0-0.1-0.5-0.1-1.3c-0.1-0.8-0.2-2-0.4-3.4
		c-0.4-2.8-1-6.4-1.7-10.1c-0.7-3.7-1.5-7.3-2.1-10c-0.2-1-0.5-1.9-0.7-2.6l3.2-0.3c0.5-0.1,0.9-0.5,0.8-1c0-0.5-0.4-0.9-0.9-0.9
		l-1.5-0.1c0.3-0.6,0.7-1.5,1.2-2.5c0.9-2.1,2.2-5,3.3-7.9c1.1-2.9,2.1-5.8,2.8-8.1C38.6,6.6,38.8,5.7,39,5c0-0.2,0.1-0.3,0.1-0.5
		c0.9-0.5,1.6-1.1,1.8-1.8C41.2,1.7,41.1,0.8,40.8,0.3z M28.3,26.1l-0.6,0c0.1-0.4,0.2-0.9,0.2-1.4c0.1-1.8,0.7-4.6,1.3-6.4
		c0.6-1.8,0.9-5.4,0.6-8c-0.2-1.8-0.3-3.8-0.2-5.1h4c-0.2,0.6-0.5,1.5-0.8,2.6c-0.6,2.1-1.5,5-2.2,7.8c-0.4,1.4-0.7,2.9-1,4.2
		c-0.3,1.3-0.6,2.6-0.8,3.7C28.6,24.6,28.4,25.5,28.3,26.1z M23.4,25.9c0-0.6,0-1.3,0-2.1c0-1,0-2.3,0-3.6c0-1.3-0.1-2.7-0.1-4.1
		c-0.1-2.8-0.3-5.6-0.4-7.7c-0.1-1.6-0.3-2.7-0.3-3.2h3.7C26,6.4,25.5,8,25,9.6c-0.8,2.5-1.2,6.4-0.9,8.8c0.3,2.2,0.3,5.2,0.1,6.6
		c-0.1,0.4-0.1,0.7-0.1,1L23.4,25.9z M21.1,23.5c-0.2-2.2-0.5-5.2-0.9-8.1c-0.4-2.9-0.9-5.9-1.3-8c-0.2-0.9-0.4-1.7-0.5-2.3
		c0.4,0.1,0.8,0.1,1.3,0.1h2.3c0,0.5-0.1,1.7-0.1,3.3c0,2.1,0,4.9,0.1,7.7c0.1,1.4,0.1,2.8,0.2,4.1c0.1,1.3,0.2,2.5,0.3,3.6
		c0.1,0.8,0.1,1.5,0.2,2.1l-1.3,0C21.3,25.2,21.2,24.4,21.1,23.5z M10.9,47.4c-1.2,0.2-2.4,0.4-3.3,0.6c-0.1,0-0.2,0-0.2,0
		c0.5-1.8,1-3.8,1.4-5.7c0.9-3.8,1.7-7.7,2.3-10.6c0.3-1.4,0.5-2.6,0.6-3.4l5.1,0.2c-0.1,0.7-0.2,1.5-0.4,2.4c-0.4,2.5-0.7,5.9-1,9.3
		c-0.2,2.4-0.4,4.7-0.5,6.8c-0.2,0-0.5,0-0.8,0C13.3,47.1,12.1,47.2,10.9,47.4z M14.8,47.7c0,0,0.1,0,0.1,0c0,0,0,0,0,0
		C14.9,47.7,14.8,47.7,14.8,47.7z M19.9,47.9c-1.2-0.1-2.3-0.1-3.4-0.2c0.3-2.2,0.6-4.8,0.8-7.3c0.3-3.4,0.5-6.8,0.6-9.3
		c0-1,0-1.8,0-2.5l4.6,0.2c0,0.8,0,1.7,0,2.8c0,1.6,0,3.4,0,5.3c0,1.9,0.1,4,0.2,6.1c0.1,1.7,0.1,3.4,0.2,5.1
		C22,48,20.9,48,19.9,47.9z M24.9,49.4c-0.1,0-0.1,0-0.2,0.1c0-0.1,0-0.2,0-0.4c0.3,0,0.7,0,1,0c0.1,0,0.1,0,0.1,0
		C25.5,49.2,25.2,49.3,24.9,49.4z M28.4,31.4c0.4,2.8,1,6.4,1.7,10.1c0.4,2.2,0.9,4.4,1.3,6.4c-0.2,0-0.3,0-0.5,0.1
		c-0.8,0.1-1.9,0.3-3,0.6c-0.1,0-0.1,0-0.2,0.1c-0.5-0.1-1.1-0.1-1.9-0.2c-0.3,0-0.7-0.1-1-0.1c0-1.7-0.1-3.5-0.1-5.3
		c-0.1-2.1-0.2-4.2-0.3-6.1c-0.1-1.9-0.3-3.8-0.4-5.3c-0.1-1-0.2-1.9-0.2-2.7l1,0c0,0,0,0,0,0c0,0,0.1,0,0.1,0l3.2-0.3
		C28.2,29.3,28.3,30.3,28.4,31.4z M36.8,7.2c-1,2.1-2.1,5-3.2,7.9c-1.1,2.9-2.1,5.8-2.8,8.1c-0.4,1.1-0.6,2-0.8,2.7
		c0,0.1-0.1,0.2-0.1,0.3l-0.7,0c0.2-0.6,0.4-1.4,0.7-2.3c0.3-1.1,0.7-2.3,1.1-3.6c0.4-1.3,0.7-2.8,1.1-4.2c0.8-2.9,1.4-5.7,1.9-7.9
		c0.3-1.2,0.5-2.3,0.6-2.9h1.7c0.6,0,1.1-0.1,1.7-0.2C37.6,5.6,37.2,6.3,36.8,7.2z"/>
	</symbol>

	<symbol id="icn--external" viewBox="0 0 768 1024">
		<title>External link</title>
		<path d="M640 768h-512v-510.094l128-1.906v-128h-256v768h768v-320h-128v192zM384 128l128 128-192 192 128 128 192-192 128 128v-384h-384z"></path>
	</symbol>

	<symbol id="icn--search" viewBox="0 0 1024 1024">
		<path d="M992.262 871.396l-242.552-206.294c-25.074-22.566-51.89-32.926-73.552-31.926 57.256-67.068 91.842-154.078 91.842-249.176 0-212.078-171.922-384-384-384-212.076 0-384 171.922-384 384s171.922 384 384 384c95.098 0 182.108-34.586 249.176-91.844-1 21.662 9.36 48.478 31.926 73.552l206.294 242.552c35.322 39.246 93.022 42.554 128.22 7.356s31.892-92.898-7.354-128.22zM384 640c-141.384 0-256-114.616-256-256s114.616-256 256-256 256 114.616 256 256-114.614 256-256 256z"></path>
	</symbol>

	<symbol id="icn--cross" viewBox="0 0 1024 1024">
		<path class="path1" d="M512 0c-282.77 0-512 229.23-512 512s229.23 512 512 512 512-229.23 512-512-229.23-512-512-512zM512 928c-229.75 0-416-186.25-416-416s186.25-416 416-416 416 186.25 416 416-186.25 416-416 416z"></path>
		<path class="path2" d="M672 256l-160 160-160-160-96 96 160 160-160 160 96 96 160-160 160 160 96-96-160-160 160-160z"></path>
	</symbol>

	<symbol id="icn--codepen" viewBox="0 0 120 120">
		<path class="outer-ring" d="M60.048 0C26.884 0 0 26.9 0 60.048s26.884 60 60 60.047c33.163 0 60.047-26.883 60.047-60.047 S93.211 0 60 0z M60.048 110.233c-27.673 0-50.186-22.514-50.186-50.186S32.375 9.9 60 9.9 c27.672 0 50.2 22.5 50.2 50.186S87.72 110.2 60 110.233z"/>
		<path class="inner-box" d="M97.147 48.319c-0.007-0.047-0.019-0.092-0.026-0.139c-0.016-0.09-0.032-0.18-0.056-0.268 c-0.014-0.053-0.033-0.104-0.05-0.154c-0.025-0.078-0.051-0.156-0.082-0.232c-0.021-0.053-0.047-0.105-0.071-0.156 c-0.033-0.072-0.068-0.143-0.108-0.211c-0.029-0.051-0.061-0.1-0.091-0.148c-0.043-0.066-0.087-0.131-0.135-0.193 c-0.035-0.047-0.072-0.094-0.109-0.139c-0.051-0.059-0.104-0.117-0.159-0.172c-0.042-0.043-0.083-0.086-0.127-0.125 c-0.059-0.053-0.119-0.104-0.181-0.152c-0.048-0.037-0.095-0.074-0.145-0.109c-0.019-0.012-0.035-0.027-0.053-0.039L61.817 23.5 c-1.072-0.715-2.468-0.715-3.54 0L24.34 46.081c-0.018 0.012-0.034 0.027-0.053 0.039c-0.05 0.035-0.097 0.072-0.144 0.1 c-0.062 0.049-0.123 0.1-0.181 0.152c-0.045 0.039-0.086 0.082-0.128 0.125c-0.056 0.055-0.108 0.113-0.158 0.2 c-0.038 0.045-0.075 0.092-0.11 0.139c-0.047 0.062-0.092 0.127-0.134 0.193c-0.032 0.049-0.062 0.098-0.092 0.1 c-0.039 0.068-0.074 0.139-0.108 0.211c-0.024 0.051-0.05 0.104-0.071 0.156c-0.031 0.076-0.057 0.154-0.082 0.2 c-0.017 0.051-0.035 0.102-0.05 0.154c-0.023 0.088-0.039 0.178-0.056 0.268c-0.008 0.047-0.02 0.092-0.025 0.1 c-0.019 0.137-0.029 0.275-0.029 0.416V71.36c0 0.1 0 0.3 0 0.418c0.006 0 0 0.1 0 0.1 c0.017 0.1 0 0.2 0.1 0.268c0.015 0.1 0 0.1 0.1 0.154c0.025 0.1 0.1 0.2 0.1 0.2 c0.021 0.1 0 0.1 0.1 0.154c0.034 0.1 0.1 0.1 0.1 0.213c0.029 0 0.1 0.1 0.1 0.1 c0.042 0.1 0.1 0.1 0.1 0.193c0.035 0 0.1 0.1 0.1 0.139c0.05 0.1 0.1 0.1 0.2 0.2 c0.042 0 0.1 0.1 0.1 0.125c0.058 0.1 0.1 0.1 0.2 0.152c0.047 0 0.1 0.1 0.1 0.1 c0.019 0 0 0 0.1 0.039L58.277 96.64c0.536 0.4 1.2 0.5 1.8 0.537c0.616 0 1.233-0.18 1.77-0.537 l33.938-22.625c0.018-0.012 0.034-0.027 0.053-0.039c0.05-0.035 0.097-0.072 0.145-0.109c0.062-0.049 0.122-0.1 0.181-0.152 c0.044-0.039 0.085-0.082 0.127-0.125c0.056-0.055 0.108-0.113 0.159-0.172c0.037-0.045 0.074-0.09 0.109-0.139 c0.048-0.062 0.092-0.127 0.135-0.193c0.03-0.049 0.062-0.098 0.091-0.146c0.04-0.07 0.075-0.141 0.108-0.213 c0.024-0.051 0.05-0.102 0.071-0.154c0.031-0.078 0.057-0.156 0.082-0.234c0.017-0.051 0.036-0.102 0.05-0.154 c0.023-0.088 0.04-0.178 0.056-0.268c0.008-0.045 0.02-0.092 0.026-0.137c0.018-0.139 0.028-0.277 0.028-0.418V48.735 C97.176 48.6 97.2 48.5 97.1 48.319z M63.238 32.073l25.001 16.666L77.072 56.21l-13.834-9.254V32.073z M56.856 32.1 v14.883L43.023 56.21l-11.168-7.471L56.856 32.073z M29.301 54.708l7.983 5.34l-7.983 5.34V54.708z M56.856 88.022L31.855 71.4 l11.168-7.469l13.833 9.252V88.022z M60.048 67.597l-11.286-7.549l11.286-7.549l11.285 7.549L60.048 67.597z M63.238 88.022V73.14 l13.834-9.252l11.167 7.469L63.238 88.022z M90.794 65.388l-7.982-5.34l7.982-5.34V65.388z"/>
	</symbol>

	<symbol id="icn--facebook" viewBox="0 0 100 100">
		<path class="inner-shape" style="opacity: 1; fill: rgb(0, 0, 0);" transform="translate(5,5) scale(0.9)" d="M82.667,1H17.335C8.351,1,1,8.351,1,17.336v65.329c0,8.99,7.351,16.335,16.334,16.335h65.332 C91.652,99.001,99,91.655,99,82.665V17.337C99,8.353,91.652,1.001,82.667,1L82.667,1z M84.318,50H68.375v42.875H50V50h-8.855V35.973 H50v-9.11c0-12.378,5.339-19.739,19.894-19.739h16.772V22.3H72.967c-4.066-0.007-4.57,2.12-4.57,6.078l-0.023,7.594H86.75 l-2.431,14.027V50z"></path>
	</symbol>

	<symbol id="icn--github" viewBox="0 0 100 100">
		<path class="inner-shape" style="opacity: 1; fill: rgb(0, 0, 0);" transform="translate(5,5) scale(0.9)" d="M50,1C22.938,1,1,22.938,1,50s21.938,49,49,49s49-21.938,49-49S77.062,1,50,1z M79.099,79.099 c-3.782,3.782-8.184,6.75-13.083,8.823c-1.245,0.526-2.509,0.989-3.79,1.387v-7.344c0-3.86-1.324-6.699-3.972-8.517 c1.659-0.16,3.182-0.383,4.57-0.67c1.388-0.287,2.855-0.702,4.402-1.245c1.547-0.543,2.935-1.189,4.163-1.938 c1.228-0.75,2.409-1.723,3.541-2.919s2.082-2.552,2.847-4.067s1.372-3.334,1.818-5.455c0.446-2.121,0.67-4.458,0.67-7.01 c0-4.945-1.611-9.155-4.833-12.633c1.467-3.828,1.308-7.991-0.478-12.489l-1.197-0.143c-0.829-0.096-2.321,0.255-4.474,1.053 c-2.153,0.798-4.57,2.105-7.249,3.924c-3.797-1.053-7.736-1.579-11.82-1.579c-4.115,0-8.039,0.526-11.772,1.579 c-1.69-1.149-3.294-2.097-4.809-2.847c-1.515-0.75-2.727-1.26-3.637-1.532c-0.909-0.271-1.754-0.439-2.536-0.503 c-0.782-0.064-1.284-0.079-1.507-0.048c-0.223,0.031-0.383,0.064-0.478,0.096c-1.787,4.53-1.946,8.694-0.478,12.489 c-3.222,3.477-4.833,7.688-4.833,12.633c0,2.552,0.223,4.889,0.67,7.01c0.447,2.121,1.053,3.94,1.818,5.455 c0.765,1.515,1.715,2.871,2.847,4.067s2.313,2.169,3.541,2.919c1.228,0.751,2.616,1.396,4.163,1.938 c1.547,0.543,3.014,0.957,4.402,1.245c1.388,0.287,2.911,0.511,4.57,0.67c-2.616,1.787-3.924,4.626-3.924,8.517v7.487 c-1.445-0.43-2.869-0.938-4.268-1.53c-4.899-2.073-9.301-5.041-13.083-8.823c-3.782-3.782-6.75-8.184-8.823-13.083 C9.934,60.948,8.847,55.56,8.847,50s1.087-10.948,3.231-16.016c2.073-4.899,5.041-9.301,8.823-13.083s8.184-6.75,13.083-8.823 C39.052,9.934,44.44,8.847,50,8.847s10.948,1.087,16.016,3.231c4.9,2.073,9.301,5.041,13.083,8.823 c3.782,3.782,6.75,8.184,8.823,13.083c2.143,5.069,3.23,10.457,3.23,16.016s-1.087,10.948-3.231,16.016 C85.848,70.915,82.88,75.317,79.099,79.099L79.099,79.099z"></path>	
	</symbol>

	<symbol id="icn--linkedin" viewBox="0 0 100 100">
		<path class="inner-shape" style="opacity: 1; fill: rgb(0, 0, 0);" transform="translate(5,5) scale(0.9)" d="M82.539,1H17.461C8.408,1,1,8.408,1,17.461v65.078C1,91.592,8.408,99,17.461,99h65.078C91.592,99,99,91.592,99,82.539 V17.461C99,8.408,91.592,1,82.539,1z M37.75,80.625H25.5V37.75h12.25V80.625z M31.625,31.625c-3.383,0-6.125-2.742-6.125-6.125 s2.742-6.125,6.125-6.125s6.125,2.742,6.125,6.125S35.008,31.625,31.625,31.625z M80.625,80.625h-12.25v-24.5 c0-3.383-2.742-6.125-6.125-6.125s-6.125,2.742-6.125,6.125v24.5h-12.25V37.75h12.25v7.606c2.526-3.47,6.389-7.606,10.719-7.606 c7.612,0,13.782,6.856,13.782,15.312L80.625,80.625L80.625,80.625z"></path>	
	</symbol>

	<symbol id="icn--tumblr" viewBox="0 0 100 100">
		<path class="inner-shape" style="opacity: 1; fill: rgb(0, 0, 0);" transform="translate(5,5) scale(0.9)" d="M82.671,1H17.336C8.351,1,1,8.351,1,17.336v65.329c0,8.99,7.351,16.335,16.335,16.335h65.335 C91.654,99.001,99,91.655,99,82.665V17.336C98.999,8.352,91.654,1.001,82.671,1L82.671,1z M71.028,79.925 c-2.886,1.358-5.506,2.315-7.848,2.865c-2.344,0.545-4.877,0.819-7.599,0.819c-3.092,0-4.917-0.388-7.291-1.166 c-2.375-0.784-4.402-1.902-6.077-3.337c-1.681-1.447-2.841-2.986-3.49-4.612c-0.65-1.628-0.972-3.99-0.972-7.082V43.698h-9.187 v-9.576c2.655-0.861,5.736-2.099,7.626-3.708c1.899-1.615,3.418-3.547,4.564-5.807c1.149-2.255,1.938-5.132,2.369-8.62h9.618v15.642 h15.635v12.071H52.739v17.34c0,3.924-0.051,6.185,0.366,7.297c0.413,1.106,1.447,2.255,2.574,2.919 c1.498,0.898,3.207,1.346,5.132,1.346c3.425,0,6.832-1.112,10.216-3.338v10.665V79.925z"></path>	
	</symbol>

	<symbol id="icn--twitter" viewBox="0 0 100 100">
		<path class="inner-shape" style="opacity: 1; fill: rgb(0, 0, 0);" transform="translate(5,5) scale(0.9)" d="M99.001,19.428c-3.606,1.608-7.48,2.695-11.547,3.184c4.15-2.503,7.338-6.466,8.841-11.189 c-3.885,2.318-8.187,4-12.768,4.908c-3.667-3.931-8.893-6.387-14.676-6.387c-11.104,0-20.107,9.054-20.107,20.223 c0,1.585,0.177,3.128,0.52,4.609c-16.71-0.845-31.525-8.895-41.442-21.131C6.092,16.633,5.1,20.107,5.1,23.813 c0,7.017,3.55,13.208,8.945,16.834c-3.296-0.104-6.397-1.014-9.106-2.529c-0.002,0.085-0.002,0.17-0.002,0.255 c0,9.799,6.931,17.972,16.129,19.831c-1.688,0.463-3.463,0.71-5.297,0.71c-1.296,0-2.555-0.127-3.783-0.363 c2.559,8.034,9.984,13.882,18.782,14.045c-6.881,5.424-15.551,8.657-24.971,8.657c-1.623,0-3.223-0.096-4.796-0.282 c8.898,5.738,19.467,9.087,30.82,9.087c36.982,0,57.206-30.817,57.206-57.543c0-0.877-0.02-1.748-0.059-2.617 C92.896,27.045,96.305,23.482,99.001,19.428z"></path>	
	</symbol>

	<symbol id="icn--rss" viewBox="0 0 512 512">
		<path d="M161.757,406.249c0,30.791-24.96,55.751-55.75,55.751c-30.79,0-55.751-24.96-55.751-55.751 s24.961-55.75,55.751-55.75C136.796,350.499,161.757,375.458,161.757,406.249z M50.256,190.424v82.593 C153.994,274.083,238.172,358.261,239.238,462h82.593C320.764,312.48,199.774,191.491,50.256,190.424z M50.256,132.602 c87.695,0.381,170.084,34.695,232.135,96.747c62.175,62.173,96.506,144.764,96.754,232.651h82.6 C461.228,234.858,277.333,50.794,50.256,50V132.602z"/>	
	</symbol>

	<symbol id="icn--tag" viewBox="0 0 512 512">
		<path d="M463.906,0H319.625c-26.453,0-63.398,15.303-82.102,34.007L14.028,257.502c-18.704,18.704-18.704,49.312,0,68.016 l172.455,172.453c18.704,18.705,49.311,18.705,68.015,0l223.495-223.494C496.697,255.772,512,218.826,512,192.375V48.094 C512,21.642,490.357,0,463.906,0z M400,160c-26.51,0-48-21.49-48-48s21.49-48,48-48s48,21.49,48,48S426.51,160,400,160z"/>
	</symbol>

	<symbol id="icn--link" viewBox="0 0 512 512">
		<path d="M156.226,199.679c7.541-7.54,15.902-13.757,24.794-18.659c49.556-27.318,113.117-12.788,144.97,35.518 l-38.547,38.547c-11.059-25.227-38.5-39.565-65.813-33.456c-10.282,2.3-20.054,7.427-28.039,15.413l-73.898,73.896 c-22.433,22.433-22.432,58.936,0.002,81.369c22.433,22.433,58.935,22.433,81.368,0l22.78-22.779 c20.71,8.217,42.938,11.508,64.862,9.863l-50.278,50.278c-43.105,43.105-112.991,43.105-156.096,0 c-43.105-43.104-43.106-112.991-0.001-156.096L156.226,199.679z M273.574,82.33l-50.278,50.278 c21.928-1.643,44.152,1.648,64.863,9.865l22.779-22.78c22.434-22.434,58.936-22.434,81.37,0c22.434,22.434,22.434,58.936,0,81.37 l-73.897,73.895c-22.501,22.501-59.061,22.311-81.368,0c-5.202-5.201-9.694-11.678-12.484-18.04l-38.546,38.546 c4.049,6.142,8.261,11.453,13.666,16.858c13.949,13.95,31.698,24.339,52.117,29.251c26.466,6.37,54.823,2.839,79.185-10.592 c8.892-4.903,17.254-11.119,24.794-18.659l73.896-73.895c43.105-43.105,43.105-112.991,0.001-156.097 C386.566,39.225,316.68,39.225,273.574,82.33z"/>
	</symbol>

	<symbol id="icn--time" viewBox="0 0 512 512">
		<path id="time-icon" d="M367,295.5H227.5V142h45v108.5H367V295.5z M256,95c-88.992,0-161,72.022-161,161 c0,88.992,72.023,161,161,161c88.992,0,161-72.023,161-161C417,167.007,344.977,95,256,95 M256,50c113.771,0,206,92.229,206,206 s-92.229,206-206,206S50,369.771,50,256S142.229,50,256,50z"/>
	</symbol>
</svg>
  <div class="content content--blog">
    <div class="search-overlay">
	<section class="search">
	<div class="search__inner">
			<svg  class="search__icon">
	<use xlink:href="#icn--search"></use>
</svg>
			<input type="text" id="search__field" class="search__field" autoFocus>
		</div>
		<div id="search__results" class="search__results">
		</div>
	</section>
	<button id="search__close" class="search__close">Close</button>
</div>
<header class="blog-header">
  <div class="blog-header__back-to-site">
  	<a class="blog__back-to-site" href="/">
		<svg  class="page-navigation__arrow">
	<use xlink:href="#icn--arrow"></use>
</svg>
		<svg  class="page-navigation__chair">
	<use xlink:href="#icn--chair"></use>
</svg>
    </a>
  </div>
  <h1 class="blog-header__title"><a href="/blog/">Eduardo saying things.</a></h1>
  <img alt="Drawing of Eduardo's bust" class="blog-header__bust" src="/assets/images/bust.png"/>
  <button id="blog-header__search" class="blog-header__search">
  	<svg  class="blog-header__search-icon">
	<use xlink:href="#icn--search"></use>
</svg>
  </button>
</header>
    <p class="cta blog__back-to-posts"><a class="arrow--left" href="/blog">Back to all posts</a></p>

    <article class="post">
      <header class="post__header">
        <h1 class="post__title">Rethinking the commenting system for my Jekyll site</h1>
        <ul class="post__meta">
          <li class="post__date"><svg  class="post__icon">
	<use xlink:href="#icn--time"></use>
</svg> May 11, 2015</li>
          
          <li class="post__tags"><svg  class="post__icon">
	<use xlink:href="#icn--tag"></use>
</svg>  <em><a href="/blog/tags.html#tag-jekyll">jekyll</a></em> <em><a href="/blog/tags.html#tag-comments">comments</a></em> <em><a href="/blog/tags.html#tag-github">github</a></em></li>
          
          <li class="post__permalink"><svg  class="post__icon">
	<use xlink:href="#icn--link"></use>
</svg> <a href="/blog/2015/05/11/rethinking-the-commenting-system-for-my-jekyll-site.html">Permalink</a></li>
        </ul>
      </header>
      <div class="post__body">
        <p>Last December I wrote <a href="/blog/2014/12/14/building-a-bespoke-commenting-system-for-a-static-site.html">a post about building a bespoke commenting for Jekyll</a>. I had been using Jekyll for a couple of months at the time, and not having an easy solution for a commenting system was the first big limitation of a static site I had to deal with. I didn’t want to use a third-party service, like Disqus, so I decided to build a bespoke solution because I knew what I wanted — or I thought I did.<!--more--></p>

<p>To sum it up, I used <a href="http://pooleapp.com">Poole</a> to handle and store my comments data and then built a server-side middleman that would get the feed from Poole, convert the Markdown to HTML and return the comments in pure HTML, ready to be appended to the page. A bit of JavaScript would then make the call to this middleman on every post and append all the comments to the page.</p>

<p>The beauty in our industry is that to keep afloat you need to be constantly learning and rethinking your processes and principles, and sometimes that means realising that the way you’ve done something in the past is not the best and that there are better and more elegant ways of going about things. I thought I knew what I wanted when I wrote that post, but I actually didn’t.</p>

<h2 id="what-i-got-wrong">What I got wrong</h2>

<p>The main reason I didn’t want to go with something like Disqus was because it’s completely off-brand. My site is my property and the way it looks and feels throughout is part of my identity, so I didn’t want to introduce a third-party service that would interfere with that. Also, Disqus comes with a bunch of features I was simply not interested in, since I was after a very simple commenting system. I still very much stand by that idea.</p>

<p>However, it wasn’t until I watched <a href="https://www.youtube.com/watch?v=BMve1OCKj6M">a talk by Tom Preston-Werner at JekyllConf</a> that I realised the bigger problem with platforms like Disqus and even with my own solution: where’s the data? The beauty of building a site with Jekyll is that content is treated as part of the site and therefore hosted and versioned alongside the codebase, taking away the hassle of backing up and migrating databases and reducing the chances of content being lost.</p>

<p>With my Poole solution, where are my comments actually stored? What happens if the service suddenly disappears? The comments are important feedback to the subjects I write about and are as valuable as the posts themselves (or sometimes even more), so shouldn’t I be storing them in my repository along with every other component of the site?
Also, relying on JavaScript to inject the comments on the page after it’s served doesn’t really feel right.</p>

<p>This leaves us with an inevitable challenge: how can we take user input and add it to the static pages we serve? Isn’t that where we draw the line of when a dynamic site is required?</p>

<h2 id="the-new-plan">The new plan</h2>

<p>Another thing that I got wrong in my original post was saying that having to regenerate the site based on user input defeats the purpose of a static site. My reasoning behind it was that generating a site is expensive, both in terms of time and amount of operations that need to take place (e.g. push files to GitHub or run a deploy script). But actually, does that really matter? That operation will run in the background and will have no impact whatsoever on the user’s experience. When the site finishes regenerating, the existing HTML pages are replaced by a set of new ones, and everything is again ready for the next visitor.</p>

<p>With that said, the new plan was to store each comment as a separate file in my <code class="highlighter-rouge">_data</code> directory, within a sub-directory for each post. To add a new comment, a server-side handler (or middleman) would receive a POST request with the form data, create a YAML file with the comment’s data and push it to GitHub, triggering a regeneration of the site.</p>

<p>On the front-end, JavaScript would hijack the form submission to avoid a page reload, sending the data as an asynchronous POST request via Ajax and preventing the default behaviour of a page reload. Upon confirmation of success, it would then append a temporary version of the new comment to the page, giving the feeling that the content was added instantly even though a lot of stuff still has to happen behind the curtain.</p>

<figure>
  <img src="/assets/posts/2015-05-11-rethinking-the-commenting-system-for-my-jekyll-site/jekyll-discuss-diagram.png" />
  <figcaption>Flow of data in the commenting system</figcaption>
</figure>

<p>The form itself would have four fields: name (mandatory), email (mandatory, but not public), url (optional) and message (mandatory). My plan for the email address was to use it as a unique identifier for the user and also to attempt to pull an avatar from Gravatar, so I just needed it to create a md5 hash — I was not going to make it public for privacy and spammy reasons.</p>

<p>Finally, my middleman is a combination of a PHP/Slim script to handle the requests and a Bash script to create the files and push them to Git. A t1.micro free instance on AWS is hosting the middleman, while GitHub pages is hosting the Jekyll installation. Before going any further, please note that everything described in this post is a proof of concept and should not be used on production as is!</p>

<h2 id="part-1-the-bash-script">Part 1: The bash script</h2>

<p>Let’s start from the end of the process and create the bash script that will take the comment data, create a YAML file and push it to GitHub. My idea was to create an independent file, completely decoupled from the PHP script, so it can potentially be used in the future by other entities or components.</p>

<p>The script will take 5 arguments: the post slug (e.g. 2015-05-11-rethinking-the-commenting-system-for-my-jekyll-site), the date and time of the comment, the commenter’s name, email address MD5 hash and url, and finally the message. I’ll skip the part where the arguments are filtered and assigned to variables because it’s just boilerplate code, but they will eventually end up in the variables <code class="highlighter-rouge">POST_SLUG</code>, <code class="highlighter-rouge">DATE</code>, <code class="highlighter-rouge">NAME</code>, <code class="highlighter-rouge">EMAIL_HASH</code>, <code class="highlighter-rouge">URL</code> and <code class="highlighter-rouge">MESSAGE</code>.</p>

<p>We’ll use a config file to store general settings to be used by both the Bash script and the PHP handler. We’ll store things like the GitHub user and repository details (where <code class="highlighter-rouge">GIT_REPO</code> is the path for the local folder and <code class="highlighter-rouge">GIT_REPO_REMOTE</code> is the remote location) and folder structure to be used for the comment files. In this example, each comment will be in a YAML file named <code class="highlighter-rouge"><span class="p">{</span><span class="err">date-and-time</span><span class="p">}</span><span class="err">-</span><span class="p">{</span><span class="err">email-hash</span><span class="p">}</span><span class="err">.yml</span></code> (e.g. <code class="highlighter-rouge">20150510170537-b7284abf8c22bf9ba22069899511404c.yml</code>), inside a directory with the post slug, all inside <code class="highlighter-rouge">_data/</code>. Here’s how my config file looks like:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre>GIT_USERNAME="eduardoboucas"
GIT_REPO="/var/www/eduardoboucas.github.io"
GIT_REMO_REMOTE="eduardoboucas/eduardoboucas.github.io.git"
GIT_USER="Eduardo Boucas"
GIT_EMAIL="mail@eduardoboucas.com"

COMMENTS_DIR_FORMAT="_data/comments/@post-slug"
COMMENTS_FILE_FORMAT="@timestamp-@hash.yml"<span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>We also need some sort of authentication to be able to push things to GitHub. Instead of using my password, which I want to keep safe from prying eyes, I generated a <a href="https://github.com/settings/tokens">personal access token</a> on GitHub and wrote it to a hidden file, called <code class="highlighter-rouge">.gittoken</code>, inside the repository — make sure to add that file to the .gitignore, because we don’t want to accidentally commit that file!</p>

<p>So when the script fires, we extract the arguments into variables, create a folder for the post if it doesn’t exist yet, and form the YAML file with the content from the comment.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46</pre></td><td class="code"><pre><span class="c"># Read GitHub token</span>
<span class="nv">TOKEN</span><span class="o">=</span><span class="sb">`</span>cat .gittoken<span class="sb">`</span>

<span class="c"># Read config file</span>
<span class="nb">source </span>config

<span class="nv">FILE</span><span class="o">=</span><span class="s2">"name: </span><span class="se">\"</span><span class="k">${</span><span class="nv">NAME</span><span class="k">}</span><span class="se">\"\n</span><span class="s2">date: </span><span class="se">\"</span><span class="k">${</span><span class="nv">DATE</span><span class="k">}</span><span class="se">\"\n</span><span class="s2">hash: </span><span class="k">${</span><span class="nv">EMAIL_HASH</span><span class="k">}</span><span class="se">\n</span><span class="s2">"</span>

<span class="k">if</span> <span class="o">[</span> ! -z <span class="s2">"</span><span class="nv">$URL</span><span class="s2">"</span> <span class="o">]</span>; <span class="k">then
    </span><span class="nv">FILE</span><span class="o">=</span><span class="k">${</span><span class="nv">FILE</span><span class="k">}</span><span class="s2">"url: </span><span class="se">\"</span><span class="k">${</span><span class="nv">URL</span><span class="k">}</span><span class="se">\"\n</span><span class="s2">"</span>
<span class="k">fi

</span><span class="nv">FILE</span><span class="o">=</span><span class="k">${</span><span class="nv">FILE</span><span class="k">}</span><span class="s2">"message: </span><span class="se">\"</span><span class="k">${</span><span class="nv">MESSAGE</span><span class="k">}</span><span class="se">\"\n</span><span class="s2">"</span>

<span class="c"># Change directory to repo</span>
<span class="nb">cd</span> <span class="k">${</span><span class="nv">GIT_REPO</span><span class="k">}</span>

<span class="c"># Form comment file directory</span>
<span class="nv">COMMENTS_DIR</span><span class="o">=</span><span class="k">${</span><span class="nv">COMMENTS_DIR_FORMAT</span><span class="p">//@post-slug/</span><span class="nv">$POST_SLUG</span><span class="k">}</span>

<span class="c"># Create directory if does not exist</span>
<span class="k">if</span> <span class="o">[</span> ! -d <span class="s2">"</span><span class="nv">$COMMENTS_DIR</span><span class="s2">"</span> <span class="o">]</span>; <span class="k">then
  </span>mkdir <span class="k">${</span><span class="nv">COMMENTS_DIR</span><span class="k">}</span>
<span class="k">fi

</span><span class="nv">COMMENT_TIMESTAMP</span><span class="o">=</span><span class="sb">`</span>date +%Y%m%d%H%M%S<span class="sb">`</span>
<span class="nv">COMMENT_FILE</span><span class="o">=</span><span class="k">${</span><span class="nv">COMMENTS_FILE_FORMAT</span><span class="p">//@timestamp/</span><span class="nv">$COMMENT_TIMESTAMP</span><span class="k">}</span>
<span class="nv">COMMENT_FILE</span><span class="o">=</span><span class="k">${</span><span class="nv">COMMENTS_DIR</span><span class="k">}</span>/<span class="k">${</span><span class="nv">COMMENT_FILE</span><span class="p">//@hash/</span><span class="nv">$EMAIL_HASH</span><span class="k">}</span>

<span class="c"># Abort if file already exists</span>
<span class="k">if</span> <span class="o">[</span> -f <span class="nv">$COMMENT_FILE</span> <span class="o">]</span>; <span class="k">then
    </span><span class="nb">exit </span>0
<span class="k">fi</span>

<span class="c"># Create file</span>
<span class="nb">printf</span> <span class="s2">"</span><span class="nv">$FILE</span><span class="s2">"</span> &gt; <span class="nv">$COMMENT_FILE</span>

<span class="c"># Prepare Git and commit file</span>
<span class="nv">GIT_ORIGIN</span><span class="o">=</span><span class="s2">"https://</span><span class="k">${</span><span class="nv">GIT_USERNAME</span><span class="k">}</span><span class="s2">:</span><span class="k">${</span><span class="nv">TOKEN</span><span class="k">}</span><span class="s2">@github.com/</span><span class="k">${</span><span class="nv">GIT_REPO_REMOTE</span><span class="k">}</span><span class="s2">"</span>

git config user.name <span class="k">${</span><span class="nv">GIT_USER</span><span class="k">}</span>
git config user.email <span class="k">${</span><span class="nv">GIT_EMAIL</span><span class="k">}</span>
git pull <span class="k">${</span><span class="nv">GIT_ORIGIN</span><span class="k">}</span> master
git add <span class="k">${</span><span class="nv">COMMENT_FILE</span><span class="k">}</span>
git commit -m <span class="s2">"New comment (Jekyll Discuss)"</span>
git push --quiet <span class="k">${</span><span class="nv">GIT_ORIGIN</span><span class="k">}</span> master &gt; /dev/null 2&gt;&amp;1<span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h2 id="part-2-the-php-handler">Part 2: The PHP handler</h2>

<p>With the bash script ready, we need something that triggers it from an HTTP request — in my case, a PHP script. All it needs to do is some very basic validation on the data received from the POST request, make sure that all the mandatory fields were filled in, check that the honey pot field was not, and then run the bash script we previously built using <code class="highlighter-rouge">exec()</code>.</p>

<p>Finally, it runs the comment through a Markdown parser and echoes back the HTML result, along with the email hash, as JSON format. On the front-end, we’ll use that data to generate a preview of the comment without forcing a page reload.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54</pre></td><td class="code"><pre><span class="cp">&lt;?php</span>

<span class="c1">// (Autoloading dependencies and initialising Slim...)
</span>
<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">(</span><span class="s1">'/comments'</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$app</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$data</span> <span class="o">=</span> <span class="nv">$app</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">post</span><span class="p">();</span>

    <span class="c1">// Checking for the honey pot
</span>    <span class="k">if</span> <span class="p">((</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$data</span><span class="p">[</span><span class="s1">'company'</span><span class="p">]))</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$data</span><span class="p">[</span><span class="s1">'company'</span><span class="p">])))</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Checking for mandatory fields
</span>    <span class="k">if</span> <span class="p">((</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$data</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]))</span> <span class="o">||</span>
        <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$data</span><span class="p">[</span><span class="s1">'email'</span><span class="p">]))</span> <span class="o">||</span>
        <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$data</span><span class="p">[</span><span class="s1">'message'</span><span class="p">]))</span> <span class="o">||</span>
        <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$data</span><span class="p">[</span><span class="s1">'post'</span><span class="p">])))</span>
    <span class="p">{</span>
        <span class="k">echo</span><span class="p">(</span><span class="s1">'Mandatory fields are missing.'</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nv">$date</span> <span class="o">=</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'M d, Y, g:i a'</span><span class="p">);</span>

    <span class="c1">// Create email hash
</span>    <span class="nv">$emailHash</span> <span class="o">=</span> <span class="nb">md5</span><span class="p">(</span><span class="nb">trim</span><span class="p">(</span><span class="nb">strtolower</span><span class="p">(</span><span class="nv">$data</span><span class="p">[</span><span class="s1">'email'</span><span class="p">])));</span>

    <span class="c1">// Parse markdown
</span>    <span class="nv">$message</span> <span class="o">=</span> <span class="nx">Parsedown</span><span class="o">::</span><span class="na">instance</span><span class="p">()</span>
                <span class="o">-&gt;</span><span class="na">setMarkupEscaped</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">setUrlsLinked</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
                <span class="o">-&gt;</span><span class="na">text</span><span class="p">(</span><span class="nv">$data</span><span class="p">[</span><span class="s1">'message'</span><span class="p">]);</span>

    <span class="nv">$shellCommand</span> <span class="o">=</span> <span class="s1">'./new-comment.sh'</span><span class="p">;</span>
    <span class="nv">$shellCommand</span> <span class="o">.=</span> <span class="s1">' --name '</span> <span class="o">.</span> <span class="nb">escapeshellarg</span><span class="p">(</span><span class="nv">$data</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]);</span>
    <span class="nv">$shellCommand</span> <span class="o">.=</span> <span class="s1">' --date '</span> <span class="o">.</span> <span class="nb">escapeshellarg</span><span class="p">(</span><span class="nv">$date</span><span class="p">);</span>
    <span class="nv">$shellCommand</span> <span class="o">.=</span> <span class="s1">' --hash \''</span> <span class="o">.</span> <span class="nv">$emailHash</span> <span class="o">.</span> <span class="s1">'\''</span><span class="p">;</span>
    <span class="nv">$shellCommand</span> <span class="o">.=</span> <span class="s1">' --post '</span> <span class="o">.</span> <span class="nb">escapeshellarg</span><span class="p">(</span><span class="nv">$data</span><span class="p">[</span><span class="s1">'post'</span><span class="p">]);</span>
    <span class="nv">$shellCommand</span> <span class="o">.=</span> <span class="s1">' --message '</span> <span class="o">.</span> <span class="nb">escapeshellarg</span><span class="p">(</span><span class="nv">$message</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$data</span><span class="p">[</span><span class="s1">'url'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$shellCommand</span> <span class="o">.=</span> <span class="s1">' --url '</span> <span class="o">.</span> <span class="nb">escapeshellarg</span><span class="p">(</span><span class="nv">$data</span><span class="p">[</span><span class="s1">'url'</span><span class="p">]);</span>
    <span class="p">}</span>

    <span class="nb">exec</span><span class="p">(</span><span class="nv">$shellCommand</span><span class="p">,</span> <span class="nv">$output</span><span class="p">);</span>

    <span class="nv">$response</span><span class="p">[</span><span class="s1">'hash'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$emailHash</span><span class="p">;</span>
    <span class="nv">$response</span><span class="p">[</span><span class="s1">'date'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$date</span><span class="p">;</span>
    <span class="nv">$response</span><span class="p">[</span><span class="s1">'message'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$message</span><span class="p">;</span>

    <span class="k">echo</span><span class="p">(</span><span class="nb">json_encode</span><span class="p">(</span><span class="nv">$response</span><span class="p">));</span>
<span class="p">});</span>

<span class="cp">?&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h2 id="part-3-showing-comments">Part 3: Showing comments</h2>

<p>With our server-side infrastructure taken care of, we’re back to Jekyll. Since the comments are stored as flat files within <code class="highlighter-rouge">_data/</code>, it’s pretty simple to access them. I started by creating an include file that will receive the comment data as arguments and print a single comment. I’ll explain why in a second.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre><span class="c">&lt;!-- _includes/blog/comment.html --&gt;</span>
<span class="nt">&lt;article</span> <span class="na">id=</span><span class="s">"comment{{ include.index }}"</span> <span class="na">class=</span><span class="s">"comment"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">class=</span><span class="s">"comment__avatar"</span> <span class="na">src=</span><span class="s">"https://www.gravatar.com/avatar/{{ include.hash }}?d=mm&amp;s=180"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h3</span> <span class="na">class=</span><span class="s">"comment__author"</span><span class="nt">&gt;</span>
        {% if (include.url) and (include.url != '@url') %}
            <span class="nt">&lt;a</span> <span class="na">rel=</span><span class="s">"nofollow"</span> <span class="na">href=</span><span class="s">"{{ include.url }}"</span><span class="nt">&gt;</span>{{ include.name }}<span class="nt">&lt;/a&gt;</span>
        {% else %}
            {{ include.name }}
        {% endif %}
    <span class="nt">&lt;/h3&gt;</span>
    <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"comment__date"</span><span class="nt">&gt;</span>
        {% if include.index %}<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#comment{{ include.index }}"</span><span class="nt">&gt;</span>#<span class="nt">&lt;/a&gt;</span> {% endif %}
        {% if include.date %}{{ include.date }}{% endif %}
    <span class="nt">&lt;/p&gt;</span>
    {{ include.message }}
<span class="nt">&lt;/article&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>I wanted to use Gravatar to display avatars for users that have one, which can be done with a simple GET request to gravatar.com with the email address hash (more info <a href="https://en.gravatar.com/site/implement/images/">here</a>). The <code class="highlighter-rouge"><span class="p">{</span><span class="err">{</span><span class="w"> </span><span class="err">include.index</span><span class="w"> </span><span class="p">}</span><span class="err">}</span></code> field is used to create attach an ID to the comment so it can be navigated to directly using an anchor link.</p>

<p>Then I created an include file that will load all the comments for a given post.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></td><td class="code"><pre><span class="c">&lt;!-- _includes/blog/comments.html --&gt;</span>
<span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">"comments"</span><span class="nt">&gt;</span>
    {% capture post_slug %}{{ page.date | date: "%Y-%m-%d" }}-{{ page.title | slugify }}{% endcapture %}
    
    <span class="nt">&lt;hr</span> <span class="na">class=</span><span class="s">"comments__separator"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;h2</span> <span class="na">class=</span><span class="s">"comments__title"</span><span class="nt">&gt;</span>Comments<span class="nt">&lt;/h2&gt;</span>

    {% if site.data.comments[post_slug] %}
        {% assign comments = site.data.comments[post_slug] | sort %}
        
        {% for comment in comments %}
            {% assign hash = comment[1].hash %}
            {% assign name = comment[1].name %}
            {% assign url = comment[1].url %}
            {% assign date = comment[1].date %}
            {% assign message = comment[1].message %}

            {% include blog/comment.html index=forloop.index hash=hash name=name url=url date=date message=message %}
        {% endfor %}
    {% endif %}

    <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"comments__description"</span><span class="nt">&gt;</span>Leave a comment<span class="nt">&lt;/p&gt;</span>

    {% include blog/newComment.html %}
<span class="nt">&lt;/section&gt;</span>

<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/template"</span> <span class="na">id=</span><span class="s">"template--new-comment"</span><span class="nt">&gt;</span>
    <span class="p">{</span><span class="o">%</span> <span class="nx">include</span> <span class="nx">blog</span><span class="o">/</span><span class="nx">comment</span><span class="p">.</span><span class="nx">html</span> <span class="nx">hash</span><span class="o">=</span><span class="s2">"@hash"</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"@name"</span> <span class="nx">url</span><span class="o">=</span><span class="s2">"@url"</span> <span class="nx">date</span><span class="o">=</span><span class="s2">"@date"</span> <span class="nx">message</span><span class="o">=</span><span class="s2">"@message"</span> <span class="o">%</span><span class="p">}</span>
<span class="nt">&lt;/script&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>So what’s happening here? Well, we capture the post slug to <code class="highlighter-rouge">post_slug</code> and use it to navigate through the data structure to get to the comments for that post. When that happens, we call the include file we previously created for each comment, passing the arguments extracted from the data file (line 18). But then we write that same file to the page inside a <code class="highlighter-rouge">&lt;script&gt;</code> tag, so it can be picked up as a template by our JavaScript and append a comment to the page. We pass some placeholders to it which later will be replaced by proper content.</p>

<h2 id="part-4-adding-new-comments">Part 4: Adding new comments</h2>

<p>The form used to add new comments is inside <code class="highlighter-rouge">newComment.html</code>, which we included previously in our comments section (line 24). It’s a very simple form and it’s posting to the PHP handler on my AWS instance.</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre><span class="c">&lt;!-- _includes/blog/newComment.html --&gt;</span>
<span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"comments-form"</span> <span class="na">class=</span><span class="s">"comments__new"</span> <span class="na">action=</span><span class="s">"https://aws1.bouc.as/jekyll-discuss/comments"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"post"</span> <span class="na">value=</span><span class="s">"{{ post_slug }}"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"company"</span> <span class="na">class=</span><span class="s">"honey"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">placeholder=</span><span class="s">"Name"</span> <span class="na">required</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"email"</span> <span class="na">name=</span><span class="s">"email"</span> <span class="na">placeholder=</span><span class="s">"Email address (will not be public)"</span> <span class="na">required</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"url"</span> <span class="na">name=</span><span class="s">"url"</span> <span class="na">placeholder=</span><span class="s">"Website (optional)"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;textarea</span> <span class="na">rows=</span><span class="s">"10"</span> <span class="na">name=</span><span class="s">"message"</span> <span class="na">placeholder=</span><span class="s">"Comment"</span> <span class="na">required</span><span class="nt">&gt;&lt;/textarea&gt;</span>
    <span class="nt">&lt;span&gt;</span>You can use <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://daringfireball.net/projects/markdown/syntax"</span><span class="nt">&gt;</span>Markdown<span class="nt">&lt;/a&gt;</span> in your comment.<span class="nt">&lt;/span&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Send"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>This would be enough to make everything work. The PHP handler could redirect users to the post they came from after it’s finished, so they would basically just see a page refresh. The only problem with this approach is that because of the time it takes for the file to be pushed to GitHub and the site to be regenerated, the newly-added comment probably wouldn’t yet be on the page when it reloads. That might be a bit confusing for the user, as they might think their comment wasn’t succesfully added which could potentially lead them to submit it again.</p>

<p>A solution for this is to use JavaScript to stop a page reload and to append a fake copy of the comment to the page to let the user know that his content was submitted successfully. That temporary version of the comment will only be valid for the duration of his visit, since the next time they reload the page the site had hopefully been regenerated and they will see the permanent version of the comment.</p>

<p>So the first step is to prevent the default behaviour of the form submit and send the information via Ajax instead. Please note that since you’ll be submitting the form to an external recipient, you’ll need to <a href="http://enable-cors.org/server.html">enable CORS on the server</a> or browsers will block the cross-domain Ajax request.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre></td><td class="code"><pre><span class="nx">$</span><span class="p">(</span><span class="s1">'#comments-form'</span><span class="p">).</span><span class="nx">submit</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'action'</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">serialize</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">formName</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">'[name="name"]'</span><span class="p">).</span><span class="nx">val</span><span class="p">().</span><span class="nx">trim</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">formUrl</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">'[name="url"]'</span><span class="p">).</span><span class="nx">val</span><span class="p">().</span><span class="nx">trim</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">formEmail</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">'[name="email"]'</span><span class="p">).</span><span class="nx">val</span><span class="p">().</span><span class="nx">trim</span><span class="p">();</span>

    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
        <span class="na">type</span><span class="p">:</span> <span class="s2">"POST"</span><span class="p">,</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">data</span><span class="p">:</span> <span class="nx">data</span><span class="p">,</span>
        <span class="na">success</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">parsedData</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>

            <span class="nx">blog</span><span class="p">.</span><span class="nx">addComment</span><span class="p">(</span><span class="nx">parsedData</span><span class="p">.</span><span class="nx">hash</span><span class="p">,</span> <span class="nx">parsedData</span><span class="p">.</span><span class="nx">date</span><span class="p">,</span> <span class="nx">formName</span><span class="p">,</span> <span class="nx">formUrl</span><span class="p">,</span> <span class="nx">parsedData</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span> 

    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">});</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Finally, we can create a function that creates a temporary comment and appends it to the page. I’m not using any client-side templating engine so I just used <code class="highlighter-rouge">String.replace()</code> to replace the placeholders with the real content, but if you are using one then it’ll probably look nicer if you use it for this job.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre></td><td class="code"><pre><span class="nx">addComment</span><span class="err">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">hash</span><span class="p">,</span> <span class="nx">date</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">template</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'template--new-comment'</span><span class="p">).</span><span class="nx">innerHTML</span><span class="p">;</span>

    <span class="nx">template</span> <span class="o">=</span> <span class="nx">template</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'@hash'</span><span class="p">,</span> <span class="nx">hash</span><span class="p">)</span>
                       <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'@date'</span><span class="p">,</span> <span class="nx">date</span><span class="p">)</span>
                       <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'@name'</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span>
                       <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'@message'</span><span class="p">,</span> <span class="nx">message</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">url</span> <span class="o">!=</span> <span class="s1">''</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">template</span> <span class="o">=</span> <span class="nx">template</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">'@url'</span><span class="p">,</span> <span class="nx">url</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">$</span><span class="p">(</span><span class="nx">template</span><span class="p">).</span><span class="nx">insertBefore</span><span class="p">(</span><span class="s1">'.comments__new'</span><span class="p">);</span>
<span class="p">},</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h2 id="wrapping-up">Wrapping up</h2>

<p>It’s important to note that all this is just a proof of concept and this solution still needs some work before it becomes a reliable solution. The code for the server-side handler is on a <a href="https://github.com/eduardoboucas/jekyll-discuss">GitHub repository</a>, along with installation instructions. Everyone is more than welcome to add issues and pull requests.</p>

<p>Regenerating the site every time someone adds a comment may seem too radical for some people, but do think that’s what the future of static site generators looks like. In his talk at JekyllConf, Parker Moore mentioned that future versions of Jekyll will be able to do a selective regeneration of a site, using an internal dependency management system to determine which files are affected by every change, allowing the engine to regenerate those files only and not the entire site.</p>

<p>Maybe that’s a sign that this approach makes sense. Or maybe I’ll write another post in a couple of months saying that I got it all wrong again. What are your thoughts? &#8718;</p>

      </div>
    </article>

    
      <section class="comments">
	
	
	<hr class="comments__separator">
	<h2 class="comments__title">Comments</h2>

	
		
		
		
			
			
			
			
			

			<article id="comment1" class="comment">
	<img class="comment__avatar" src="https://www.gravatar.com/avatar/4f8072e22fae3cd98b876df304886bed?d=mm&s=180">
	<div class="comment__content-wrapper">
		<h3 class="comment__author">
			
				<a rel="nofollow" href="https://eduardoboucas.com">Eduardo Boucas</a>
			
		</h3>
		<p class="comment__date">
			<a href="#comment1">#</a> 
			May 11, 2015, 10:12 am
		</p>
		<p>And here's a test. <em>Fingers crossed</em></p>
	</div>
</article>
		
			
			
			
			
			

			<article id="comment2" class="comment">
	<img class="comment__avatar" src="https://www.gravatar.com/avatar/69fda0df8b4878fb6a18deffa972d26a?d=mm&s=180">
	<div class="comment__content-wrapper">
		<h3 class="comment__author">
			
				<a rel="nofollow" href="http://erlend.sh">Erlend</a>
			
		</h3>
		<p class="comment__date">
			<a href="#comment2">#</a> 
			May 11, 2015, 11:31 am
		</p>
		<p>Here's another test for ya!</p>
	</div>
</article>
		
			
			
			
			
			

			<article id="comment3" class="comment">
	<img class="comment__avatar" src="https://www.gravatar.com/avatar/25c7c18223fb42a4c6ae1c8db6f50f9b?d=mm&s=180">
	<div class="comment__content-wrapper">
		<h3 class="comment__author">
			
				<a rel="nofollow" href="http://tom.preston-werner.com">Tom Preston-Werner</a>
			
		</h3>
		<p class="comment__date">
			<a href="#comment3">#</a> 
			May 11, 2015, 4:18 pm
		</p>
		<p>Love it! This is exactly what I had in mind during my talk. It's great to see a proper implementation. Thanks for writing it up!</p>
	</div>
</article>
		
			
			
			
			
			

			<article id="comment4" class="comment">
	<img class="comment__avatar" src="https://www.gravatar.com/avatar/4f8072e22fae3cd98b876df304886bed?d=mm&s=180">
	<div class="comment__content-wrapper">
		<h3 class="comment__author">
			
				<a rel="nofollow" href="https://eduardoboucas.com">Eduardo Boucas</a>
			
		</h3>
		<p class="comment__date">
			<a href="#comment4">#</a> 
			May 11, 2015, 7:01 pm
		</p>
		<p>Thanks Tom, I'm glad I was able to capture your idea properly. And thank you for your inspiring talk!</p> <p>Next, I'm looking into adding the ability for commenters to subscribe to email notifications when other people comment on the same post.</p>
	</div>
</article>
		
			
			
			
			
			

			<article id="comment5" class="comment">
	<img class="comment__avatar" src="https://www.gravatar.com/avatar/262846d489a03db9b88bb4ecedd5a2ae?d=mm&s=180">
	<div class="comment__content-wrapper">
		<h3 class="comment__author">
			
				Ron
			
		</h3>
		<p class="comment__date">
			<a href="#comment5">#</a> 
			May 12, 2015, 5:45 am
		</p>
		<p>I like it!</p>
	</div>
</article>
		
			
			
			
			
			

			<article id="comment6" class="comment">
	<img class="comment__avatar" src="https://www.gravatar.com/avatar/262846d489a03db9b88bb4ecedd5a2ae?d=mm&s=180">
	<div class="comment__content-wrapper">
		<h3 class="comment__author">
			
				Ron
			
		</h3>
		<p class="comment__date">
			<a href="#comment6">#</a> 
			May 12, 2015, 6:02 am
		</p>
		<p>This is really cool, I really like the idea/follow thru... but then there is spam to deal with.</p>
	</div>
</article>
		
			
			
			
			
			

			<article id="comment7" class="comment">
	<img class="comment__avatar" src="https://www.gravatar.com/avatar/b45c48fc9e05922e2f368a9d7d7d8de1?d=mm&s=180">
	<div class="comment__content-wrapper">
		<h3 class="comment__author">
			
				<a rel="nofollow" href="http://blog.lmorchard.com">Les Orchard</a>
			
		</h3>
		<p class="comment__date">
			<a href="#comment7">#</a> 
			May 20, 2015, 4:04 pm
		</p>
		<p>Here's another approach: I host my blog entirely on Amazon S3, so I don't have a server with PHP behind it to catch comments. So, I use Disqus. But, when using a 3rd party service like that, I expect it to go away at any time. Luckily, Disqus has an API for fetching all your comments.</p> <p>So, what I was doing for awhile was to let comments run on a post for a few months. Then, close commenting and run a script that scooped up all the comments from the API, incorporate those into a section in the original post, and check that into the repository. So, live comments are handled by Disqus, but archived &amp; closed discussions are incorporated into the static site itself.</p> <p>Here's some dirty code, FWIW: https://github.com/lmorchard/blog.decafbad.com/blob/master/_bin/archive_disqus_comments.py</p>
	</div>
</article>
		
			
			
			
			
			

			<article id="comment8" class="comment">
	<img class="comment__avatar" src="https://www.gravatar.com/avatar/6dfc114d927c3f5bd61c2697b4adf2bc?d=mm&s=180">
	<div class="comment__content-wrapper">
		<h3 class="comment__author">
			
				<a rel="nofollow" href="http://ti.gt/">Tigt</a>
			
		</h3>
		<p class="comment__date">
			<a href="#comment8">#</a> 
			May 29, 2015, 8:58 am
		</p>
		<p>I feel like this approach can go very, very far; instead of &quot;static site generators,&quot; something like &quot;cache generators.&quot; (Where the cache is the filesystem.)</p>
	</div>
</article>
		
			
			
			
			
			

			<article id="comment9" class="comment">
	<img class="comment__avatar" src="https://www.gravatar.com/avatar/d2122263f0e71304b5c2ea002f753372?d=mm&s=180">
	<div class="comment__content-wrapper">
		<h3 class="comment__author">
			
				Miguel
			
		</h3>
		<p class="comment__date">
			<a href="#comment9">#</a> 
			Jun 08, 2015, 7:33 pm
		</p>
		<p>I like it too.</p>
	</div>
</article>
		
			
			
			
			
			

			<article id="comment10" class="comment">
	<img class="comment__avatar" src="https://www.gravatar.com/avatar/0cea8a57f5a8e4acd8e35a5686b3ea56?d=mm&s=180">
	<div class="comment__content-wrapper">
		<h3 class="comment__author">
			
				<a rel="nofollow" href="http://walutisme.com">walutisme</a>
			
		</h3>
		<p class="comment__date">
			<a href="#comment10">#</a> 
			Jun 19, 2015, 10:12 am
		</p>
		<p>Well, this is just a test too</p>
	</div>
</article>
		
			
			
			
			
			

			<article id="comment11" class="comment">
	<img class="comment__avatar" src="https://www.gravatar.com/avatar/32395f2fc9c9e37d224006e9fe8810b7?d=mm&s=180">
	<div class="comment__content-wrapper">
		<h3 class="comment__author">
			
				Alex
			
		</h3>
		<p class="comment__date">
			<a href="#comment11">#</a> 
			Jun 22, 2015, 5:22 am
		</p>
		<p>Nice idea indeed! A little bug report: empty comments are passing through. I guess Safari 8 doesn't care much about <code>required</code> form attribute.</p>
	</div>
</article>
		
			
			
			
			
			

			<article id="comment12" class="comment">
	<img class="comment__avatar" src="https://www.gravatar.com/avatar/81d6aa4a3fb7dccd07ca625b23e5c3ff?d=mm&s=180">
	<div class="comment__content-wrapper">
		<h3 class="comment__author">
			
				Michael
			
		</h3>
		<p class="comment__date">
			<a href="#comment12">#</a> 
			Jun 26, 2015, 8:39 am
		</p>
		<p>Very nice idea Eduardo! This is a test ;)</p>
	</div>
</article>
		
	

	<p class="js-new-comments comments__description">Leave a comment</p>

	<form id="comments-form" class="comments__new" action="https://aws.bouc.as/jekyll-discuss/comments" method="post">
    <input type="hidden" name="post-url" value="/blog/2015/05/11/rethinking-the-commenting-system-for-my-jekyll-site.html">
    <input type="hidden" name="post-slug" value="2015-05-11-rethinking-the-commenting-system-for-my-jekyll-site">
    <input type="hidden" name="post-title" value="Rethinking the commenting system for my Jekyll site">
    <input type="text" name="company" class="honey comments__field">
    <input class="comments__field" type="text" name="name" placeholder="Name" required/>
    <input class="comments__field" type="email" name="email" placeholder="Email address (will not be public)" required/>
    <input class="comments__field" type="url" name="url" placeholder="Website (optional)"/>
    <textarea class="comments__field" rows="10" name="message" placeholder="Comment" required></textarea>
    <span class="comments__info">You can use <a href="http://daringfireball.net/projects/markdown/syntax">Markdown</a> in your comment.</span>
    <input id="comments-form-subscribe" type="checkbox" name="subscribe" value="subscribe">
    <label for="comments-form-subscribe">Notify me of new comments by email</label>
    <input class="comments__field" type="submit" value="Send" />
</form>
</section>

<script type="text/template" id="template--new-comment">
	<article id="comment" class="comment">
	<img class="comment__avatar" src="https://www.gravatar.com/avatar/@hash?d=mm&s=180">
	<div class="comment__content-wrapper">
		<h3 class="comment__author">
			
				@name
			
		</h3>
		<p class="comment__date">
			
			@date
		</p>
		@message
	</div>
</article>
</script>
    

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-54012006-1', 'auto');
  ga('send', 'pageview');
</script>
    <footer class="blog__footer">
	Generated by <a href="http://jekyllrb.com/">Jekyll</a>. Hosted by <a href="https://github.com/">GitHub</a>.<br/>
	<a href="http://feeds.eduardoboucas.com/eduardoboucas">
		<svg  class="blog-footer__icon--rss">
	<use xlink:href="#icn--rss"></use>
</svg>
	</a>
</footer>
</body>
</html>